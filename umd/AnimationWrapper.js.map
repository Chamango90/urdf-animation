{"version":3,"file":"AnimationWrapper.js","sources":["../AnimationWrapper.js"],"sourcesContent":["import * as THREE from 'three';\nimport URDFViewer from 'urdf-loader';\n\n// import URDFViewer from 'urdf-loader/urdf-viewer-element.js';\n\nexport default\n    class AnimationWrapper extends URDFViewer {\n\n    constructor() {\n\n        super();\n\n        // removed shader bug https://github.com/mrdoob/three.js/issues/9716\n        this.renderer.context.getShaderInfoLog = function () { return ''; };\n\n        this.defaultTitle = 'URDF animation';\n        //if (document.title == '') document.title = this.defaultTitle;\n        const meshOnlyLoader = this.urdfLoader.defaultMeshLoader.bind(this.urdfLoader);\n        this.urdfLoader.defaultMeshLoader = (path, ext, done) => {\n\n            meshOnlyLoader(path, ext, obj => {\n                for (let i = obj.children.length - 1; i >= 0; i--) {\n\n                    if (obj.children[i].type !== 'Mesh') {\n                        obj.remove(obj.children[i]);\n                    }\n                }\n\n                done(obj);\n            });\n        };\n\n        this.clock = new THREE.Clock();\n\n        this.controls.enablePan = true;\n        this.controls.enableDamping = true; // an animation loop is required when either damping or auto-rotation are enabled\n        this.controls.dampingFactor = 0.25;\n        this.controls.screenSpacePanning = false;\n        this.controls.maxPolarAngle = Math.PI / 2;\n        // this.controls.removeEventListener('change', () => this.recenter());\n\n\n    }\n\n    _setRecorder(quality, speed) {\n        this.action.reset();\n        this.mixer.update(this.clock.getDelta()); // Jump to first frame before record\n        this.gif.abort();\n        this.gif.width = null;\n        this.gif.height = null;\n        this.gif.frames = []; // Remove previous recorded frames\n        this.gif.setOptions({\n            quality: quality,\n            width: this.canvas.width,\n            height: this.canvas.height\n        });\n        this.mixer.timeScale = speed;\n        this.action.paused = false;\n    }\n\n\n    renderLoop() {\n        requestAnimationFrame(this.renderLoop.bind(this));\n        this.mixer.update(this.clock.getDelta());\n\n        if (this.recording) {\n            this.gif.addFrame(this.canvas, { delay: this.delay, copy: true });\n            this.updateRecordBar();\n        }\n    }\n\n    _addGIFConverterGUI() {\n        if (this.gui == null) this.gui = new dat.GUI();\n        this.gif.on('progress', p => gifAPI['converting ='] = p * 100);\n        this.mixer.addEventListener('loop', () => {\n            if (this.recording) {\n                this.recording = false;\n                this.action.paused = true;\n                this.gif.render();\n            }\n        });\n        this.updateRecordBar = () => gifAPI['recording ='] = this.action.time;\n        let folder = this.gui.addFolder('Record ' + this.track.name),\n            gifAPI = {\n                'record()': () => {\n                    this._setRecorder(gifAPI.quality, gifAPI.speed);\n                    gifAPI['recording ='] = 0;\n                    gifAPI['converting ='] = 0;\n                    this.recording = true;\n                },\n                'recording =': 0,\n                'converting =': 0,\n                speed: 1,\n                quality: 10\n            };\n\n        folder.add(gifAPI, 'speed', 0.1, 10);\n        folder.add(gifAPI, 'quality', 1, 10, 1);\n        folder.add(gifAPI, 'record()');\n        let rec = folder.add(gifAPI, 'recording =', 0, this.track.duration).listen();\n        let conv = folder.add(gifAPI, 'converting =', 0, 100).listen();\n        rec.domElement.style.pointerEvents = 'none';\n        conv.domElement.style.pointerEvents = 'none';\n    }\n\n    setCamera(data) {\n\n        this.camera.fov = data.fov;\n        this.camera.position.set(...data.position);\n    }\n\n    setLight(data) {\n\n        this.directionalLight.position.set(...data.position);\n        this.directionalLight.shadow.bias = data.shadow.bias;\n        this.directionalLight.shadow.mapSize.width = data.shadow.mapSize.width;\n        this.directionalLight.shadow.mapSize.height = data.shadow.mapSize.width;\n    }\n\n\n    addURDF(data) {\n\n        this.setUrdf = (urdf) => {\n            super.urdf = urdf;\n        };\n\n        if (Object.prototype.toString.call(data.urdfPkgs) === '[object String]')\n\n            new THREE.FileLoader().load(data.urdfPkgs, pkgs => {\n                super.package = parseRosinstall(pkgs);\n                this.setUrdf(data.urdf); // once the packages are parsed\n            });\n\n        else {\n            let pkgs = data.urdfPkgs || [];\n            super.package = pkgs.join(', ');\n            this.setUrdf(data.urdf);\n        }\n\n    }\n\n\n    addAnimation(data) {\n\n        this.addEventListener('geometry-loaded', () => {\n\n            new THREE.FileLoader().load(data.animation, anim => {\n                // Load recorded robot motion into a Three.js clipAction\n                const fading = data.fading || 0.0;\n                const controlGUI = data.controlGUI | false;\n                const loopOnce = data.loopOnce | false;\n\n                this.mixer = new THREE.AnimationMixer(this.world);\n                this.track = THREE.AnimationClip.parse(JSON.parse(anim));\n                this.action = this.mixer.clipAction(this.track);\n                this.action.fadeIn(fading).play();\n                if (loopOnce) {\n                    this.action.setLoop(THREE.LoopOnce);\n                    this.action.clampWhenFinished = true;\n                }\n                if (this.gui == null) this.gui = new dat.GUI();\n                if (controlGUI) addControlGUI(this.gui, this.action, this.track, fading);\n\n                this.dispatchEvent(new CustomEvent('animation-loaded', { bubbles: true, cancelable: true, composed: true }));\n                this.renderLoop();\n            });\n        }, { once: true });\n    }\n\n    addGIFConverter(data) {\n        this.addEventListener('animation-loaded', () => {\n\n            this.canvas = document.getElementsByTagName('canvas')[0];\n\n            this.gif = new GIF({    // https://github.com/jnordberg/gif.js\n                repeat: data.repeate || 0,  // 1 = no repeat, 0 = forever\n                workers: data.workers || 2,\n                workerScript: data.workerScript || 'gif.worker.js',\n                background: data.background || '#fff',\n                transparent: this.transparent || null, // hex color, 0x00FF00 = green\n                dither: data.dither || false, // e.g. FloydSteinberg-serpentine\n                debug: data.debug || false,\n            });\n            this.gif.on('finished', blob => window.open(URL.createObjectURL(blob)));\n\n            this.delay = data.delay || 500;\n            this.renderer.setClearColor(0xffffff); //white bg for recorded gif\n\n            this._addGIFConverterGUI();\n        });// TODO check if \"once\" is better\n    }\n\n    addWorld(data) {\n\n        const urdf = data.urdf;\n        const pkgs = data.packagesContainingMeshes.join(', ') || '';\n\n        this.urdfLoader.load(urdf, pkgs,\n            obj => {\n                obj.traverse(c => {\n                    if (c.type === 'Mesh') {\n                        c.castShadow = true;\n                        c.receiveShadow = true;\n                    }\n                });\n                this.scene.add(obj);\n            }\n        );\n    }\n}\n\n\nfunction addControlGUI(gui, action, track, fading) {\n    // modified code of https://threejs.org/examples/#webgl_animation_skinning_morph\n    let folder = gui.addFolder('Control ' + track.name),\n        API = {\n            'play()': () => action.play(),\n            'stop()': () => action.stop(),\n            'reset()': () => action.reset(),\n            get 'time ='() { return action !== null ? action.time : 0; },\n            set 'time ='(value) { action.time = value; },\n            get 'paused ='() { return action !== null && action.paused; },\n            set 'paused ='(value) { action.paused = value; },\n            get 'enabled ='() { return action !== null && action.enabled; },\n            'fade in()': () => action.reset().fadeIn(fading).play()\n        };\n\n    folder.add(API, 'play()');\n    folder.add(API, 'stop()');\n    folder.add(API, 'reset()');\n    folder.add(API, 'time =', 0, track.duration).listen();\n    folder.add(API, 'paused =').listen();\n    folder.add(API, 'fade in()');\n}\n\nfunction parseRosinstall(pkgs) {\n\n    function gitraw(uri) {\n        const base = 'https://raw.githubusercontent.com/';\n        const repo = uri.split('https://github.com/')[1].split('.git')[0];\n        return base + repo;\n    }\n\n    //Hardcoded for git\n    function g(obj, key) { return obj['git'][key]; }\n    let l = 'local-name', u = 'uri', v = 'version';\n\n    return jsyaml.load(pkgs).map(i => `${g(i, l)}: ${gitraw(g(i, u))}/${g(i, v)}/${g(i, l)}`);\n\n}\n\ncustomElements.define('urdf-viewer', AnimationWrapper);\n"],"names":["THREE.Clock","THREE.FileLoader","THREE.AnimationMixer","THREE.AnimationClip","THREE.LoopOnce"],"mappings":";;;;;;;;IAGA;;AAEA,IACI,MAAM,gBAAgB,SAAS,UAAU,CAAC;;IAE9C,IAAI,WAAW,GAAG;;IAElB,QAAQ,KAAK,EAAE,CAAC;;IAEhB;IACA,QAAQ,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,gBAAgB,GAAG,YAAY,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;;IAE5E,QAAQ,IAAI,CAAC,YAAY,GAAG,gBAAgB,CAAC;IAC7C;IACA,QAAQ,MAAM,cAAc,GAAG,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IACvF,QAAQ,IAAI,CAAC,UAAU,CAAC,iBAAiB,GAAG,CAAC,IAAI,EAAE,GAAG,EAAE,IAAI,KAAK;;IAEjE,YAAY,cAAc,CAAC,IAAI,EAAE,GAAG,EAAE,GAAG,IAAI;IAC7C,gBAAgB,KAAK,IAAI,CAAC,GAAG,GAAG,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;;IAEnE,oBAAoB,IAAI,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,MAAM,EAAE;IACzD,wBAAwB,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;IACpD,qBAAqB;IACrB,iBAAiB;;IAEjB,gBAAgB,IAAI,CAAC,GAAG,CAAC,CAAC;IAC1B,aAAa,CAAC,CAAC;IACf,SAAS,CAAC;;IAEV,QAAQ,IAAI,CAAC,KAAK,GAAG,IAAIA,WAAW,EAAE,CAAC;;IAEvC,QAAQ,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAC;IACvC,QAAQ,IAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,IAAI,CAAC;IAC3C,QAAQ,IAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,IAAI,CAAC;IAC3C,QAAQ,IAAI,CAAC,QAAQ,CAAC,kBAAkB,GAAG,KAAK,CAAC;IACjD,QAAQ,IAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;IAClD;;;IAGA,KAAK;;IAEL,IAAI,YAAY,CAAC,OAAO,EAAE,KAAK,EAAE;IACjC,QAAQ,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;IAC5B,QAAQ,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;IACjD,QAAQ,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC;IACzB,QAAQ,IAAI,CAAC,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC;IAC9B,QAAQ,IAAI,CAAC,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC;IAC/B,QAAQ,IAAI,CAAC,GAAG,CAAC,MAAM,GAAG,EAAE,CAAC;IAC7B,QAAQ,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC;IAC5B,YAAY,OAAO,EAAE,OAAO;IAC5B,YAAY,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK;IACpC,YAAY,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM;IACtC,SAAS,CAAC,CAAC;IACX,QAAQ,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC;IACrC,QAAQ,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,KAAK,CAAC;IACnC,KAAK;;;IAGL,IAAI,UAAU,GAAG;IACjB,QAAQ,qBAAqB,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IAC1D,QAAQ,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;;IAEjD,QAAQ,IAAI,IAAI,CAAC,SAAS,EAAE;IAC5B,YAAY,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;IAC9E,YAAY,IAAI,CAAC,eAAe,EAAE,CAAC;IACnC,SAAS;IACT,KAAK;;IAEL,IAAI,mBAAmB,GAAG;IAC1B,QAAQ,IAAI,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,IAAI,CAAC,GAAG,GAAG,IAAI,GAAG,CAAC,GAAG,EAAE,CAAC;IACvD,QAAQ,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,IAAI,MAAM,CAAC,cAAc,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC;IACvE,QAAQ,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,MAAM,EAAE,MAAM;IAClD,YAAY,IAAI,IAAI,CAAC,SAAS,EAAE;IAChC,gBAAgB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;IACvC,gBAAgB,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC;IAC1C,gBAAgB,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC;IAClC,aAAa;IACb,SAAS,CAAC,CAAC;IACX,QAAQ,IAAI,CAAC,eAAe,GAAG,MAAM,MAAM,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;IAC9E,QAAQ,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;IACpE,YAAY,MAAM,GAAG;IACrB,gBAAgB,UAAU,EAAE,MAAM;IAClC,oBAAoB,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC;IACpE,oBAAoB,MAAM,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;IAC9C,oBAAoB,MAAM,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;IAC/C,oBAAoB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;IAC1C,iBAAiB;IACjB,gBAAgB,aAAa,EAAE,CAAC;IAChC,gBAAgB,cAAc,EAAE,CAAC;IACjC,gBAAgB,KAAK,EAAE,CAAC;IACxB,gBAAgB,OAAO,EAAE,EAAE;IAC3B,aAAa,CAAC;;IAEd,QAAQ,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;IAC7C,QAAQ,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;IAChD,QAAQ,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;IACvC,QAAQ,IAAI,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,aAAa,EAAE,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,CAAC;IACrF,QAAQ,IAAI,IAAI,GAAG,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,cAAc,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC;IACvE,QAAQ,GAAG,CAAC,UAAU,CAAC,KAAK,CAAC,aAAa,GAAG,MAAM,CAAC;IACpD,QAAQ,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,aAAa,GAAG,MAAM,CAAC;IACrD,KAAK;;IAEL,IAAI,SAAS,CAAC,IAAI,EAAE;;IAEpB,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;IACnC,QAAQ,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;IACnD,KAAK;;IAEL,IAAI,QAAQ,CAAC,IAAI,EAAE;;IAEnB,QAAQ,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC7D,QAAQ,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;IAC7D,QAAQ,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC;IAC/E,QAAQ,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC;IAChF,KAAK;;;IAGL,IAAI,OAAO,CAAC,IAAI,EAAE;;IAElB,QAAQ,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,KAAK;IACjC,YAAY,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC;IAC9B,SAAS,CAAC;;IAEV,QAAQ,IAAI,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,iBAAiB;;IAE/E,YAAY,IAAIC,gBAAgB,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,IAAI;IAC/D,gBAAgB,KAAK,CAAC,OAAO,GAAG,eAAe,CAAC,IAAI,CAAC,CAAC;IACtD,gBAAgB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACxC,aAAa,CAAC,CAAC;;IAEf,aAAa;IACb,YAAY,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,IAAI,EAAE,CAAC;IAC3C,YAAY,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC5C,YAAY,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACpC,SAAS;;IAET,KAAK;;;IAGL,IAAI,YAAY,CAAC,IAAI,EAAE;;IAEvB,QAAQ,IAAI,CAAC,gBAAgB,CAAC,iBAAiB,EAAE,MAAM;;IAEvD,YAAY,IAAIA,gBAAgB,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,IAAI;IAChE;IACA,gBAAgB,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,IAAI,GAAG,CAAC;IAClD,gBAAgB,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;IAC3D,gBAAgB,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;;IAEvD,gBAAgB,IAAI,CAAC,KAAK,GAAG,IAAIC,oBAAoB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAClE,gBAAgB,IAAI,CAAC,KAAK,GAAGC,mBAAmB,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;IACzE,gBAAgB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAChE,gBAAgB,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,CAAC;IAClD,gBAAgB,IAAI,QAAQ,EAAE;IAC9B,oBAAoB,IAAI,CAAC,MAAM,CAAC,OAAO,CAACC,cAAc,CAAC,CAAC;IACxD,oBAAoB,IAAI,CAAC,MAAM,CAAC,iBAAiB,GAAG,IAAI,CAAC;IACzD,iBAAiB;IACjB,gBAAgB,IAAI,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,IAAI,CAAC,GAAG,GAAG,IAAI,GAAG,CAAC,GAAG,EAAE,CAAC;IAC/D,gBAAgB,IAAI,UAAU,EAAE,aAAa,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;;IAEzF,gBAAgB,IAAI,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,kBAAkB,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;IAC7H,gBAAgB,IAAI,CAAC,UAAU,EAAE,CAAC;IAClC,aAAa,CAAC,CAAC;IACf,SAAS,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;IAC3B,KAAK;;IAEL,IAAI,eAAe,CAAC,IAAI,EAAE;IAC1B,QAAQ,IAAI,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,MAAM;;IAExD,YAAY,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;;IAErE,YAAY,IAAI,CAAC,GAAG,GAAG,IAAI,GAAG,CAAC;IAC/B,gBAAgB,MAAM,EAAE,IAAI,CAAC,OAAO,IAAI,CAAC;IACzC,gBAAgB,OAAO,EAAE,IAAI,CAAC,OAAO,IAAI,CAAC;IAC1C,gBAAgB,YAAY,EAAE,IAAI,CAAC,YAAY,IAAI,eAAe;IAClE,gBAAgB,UAAU,EAAE,IAAI,CAAC,UAAU,IAAI,MAAM;IACrD,gBAAgB,WAAW,EAAE,IAAI,CAAC,WAAW,IAAI,IAAI;IACrD,gBAAgB,MAAM,EAAE,IAAI,CAAC,MAAM,IAAI,KAAK;IAC5C,gBAAgB,KAAK,EAAE,IAAI,CAAC,KAAK,IAAI,KAAK;IAC1C,aAAa,CAAC,CAAC;IACf,YAAY,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,UAAU,EAAE,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;;IAEpF,YAAY,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,IAAI,GAAG,CAAC;IAC3C,YAAY,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;;IAElD,YAAY,IAAI,CAAC,mBAAmB,EAAE,CAAC;IACvC,SAAS,CAAC,CAAC;IACX,KAAK;;IAEL,IAAI,QAAQ,CAAC,IAAI,EAAE;;IAEnB,QAAQ,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;IAC/B,QAAQ,MAAM,IAAI,GAAG,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;;IAEpE,QAAQ,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI;IACvC,YAAY,GAAG,IAAI;IACnB,gBAAgB,GAAG,CAAC,QAAQ,CAAC,CAAC,IAAI;IAClC,oBAAoB,IAAI,CAAC,CAAC,IAAI,KAAK,MAAM,EAAE;IAC3C,wBAAwB,CAAC,CAAC,UAAU,GAAG,IAAI,CAAC;IAC5C,wBAAwB,CAAC,CAAC,aAAa,GAAG,IAAI,CAAC;IAC/C,qBAAqB;IACrB,iBAAiB,CAAC,CAAC;IACnB,gBAAgB,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IACpC,aAAa;IACb,SAAS,CAAC;IACV,KAAK;IACL,CAAC;;;IAGD,SAAS,aAAa,CAAC,GAAG,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE;IACnD;IACA,IAAI,IAAI,MAAM,GAAG,GAAG,CAAC,SAAS,CAAC,UAAU,GAAG,KAAK,CAAC,IAAI,CAAC;IACvD,QAAQ,GAAG,GAAG;IACd,YAAY,QAAQ,EAAE,MAAM,MAAM,CAAC,IAAI,EAAE;IACzC,YAAY,QAAQ,EAAE,MAAM,MAAM,CAAC,IAAI,EAAE;IACzC,YAAY,SAAS,EAAE,MAAM,MAAM,CAAC,KAAK,EAAE;IAC3C,YAAY,IAAI,QAAQ,GAAG,EAAE,OAAO,MAAM,KAAK,IAAI,GAAG,MAAM,CAAC,IAAI,GAAG,CAAC,CAAC,EAAE;IACxE,YAAY,IAAI,QAAQ,CAAC,KAAK,EAAE,EAAE,MAAM,CAAC,IAAI,GAAG,KAAK,CAAC,EAAE;IACxD,YAAY,IAAI,UAAU,GAAG,EAAE,OAAO,MAAM,KAAK,IAAI,IAAI,MAAM,CAAC,MAAM,CAAC,EAAE;IACzE,YAAY,IAAI,UAAU,CAAC,KAAK,EAAE,EAAE,MAAM,CAAC,MAAM,GAAG,KAAK,CAAC,EAAE;IAC5D,YAAY,IAAI,WAAW,GAAG,EAAE,OAAO,MAAM,KAAK,IAAI,IAAI,MAAM,CAAC,OAAO,CAAC,EAAE;IAC3E,YAAY,WAAW,EAAE,MAAM,MAAM,CAAC,KAAK,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE;IACnE,SAAS,CAAC;;IAEV,IAAI,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;IAC9B,IAAI,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;IAC9B,IAAI,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;IAC/B,IAAI,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,CAAC;IAC1D,IAAI,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC,MAAM,EAAE,CAAC;IACzC,IAAI,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC;IACjC,CAAC;;IAED,SAAS,eAAe,CAAC,IAAI,EAAE;;IAE/B,IAAI,SAAS,MAAM,CAAC,GAAG,EAAE;IACzB,QAAQ,MAAM,IAAI,GAAG,oCAAoC,CAAC;IAC1D,QAAQ,MAAM,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;IAC1E,QAAQ,OAAO,IAAI,GAAG,IAAI,CAAC;IAC3B,KAAK;;IAEL;IACA,IAAI,SAAS,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,OAAO,GAAG,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE;IACpD,IAAI,IAAI,CAAC,GAAG,YAAY,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,GAAG,SAAS,CAAC;;IAEnD,IAAI,OAAO,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;IAE9F,CAAC;;IAED,cAAc,CAAC,MAAM,CAAC,aAAa,EAAE,gBAAgB,CAAC,CAAC;;;;;;;;"}